<canvas id="a" width=400 height=400 />
<script>
style='fillStyle';
draw='fillRect';
flr=Math.floor;
rnd=Math.random;
doct=document;
ctx=doct.getElementById('a').getContext('2d');
function reset(partial) {
	if(!partial){
		positions=[{x:9,y:9}];
		moveDir=97;
	}
	foodX=flr(20*rnd());
	foodY=flr(20*rnd());
	canChangeDir=1;
}
reset();
doct.onkeypress = function(evt) {
	if(canChangeDir&&moveDir%12>5!=evt.which%12>5){moveDir=evt.which;canChangeDir=0;}
};
setInterval(function(){
	//draw background
	ctx[style]="#cfb";
	ctx[draw](0,0,400,400);
	//move snake
	tempPos0=positions[0];
	positions.unshift({
		x:tempPos0.x-flr((moveDir%14-3)/10),
		y:tempPos0.y+flr((moveDir%13-3)/8)
	});
	tempPosX=positions[0].x;
	tempPosY=positions[0].y;
	positions.pop();
	//check for out of bounds
	if(tempPosX<0||tempPosY<0||tempPosX>19||tempPosY>19){reset();}
	//eat food
	if(tempPosX==foodX&&tempPosY==foodY){
		positions.push([-1,-1]);
		reset(1);
	}
	//draw food
	ctx[style]="#f01";
	ctx[draw](20*foodX,20*foodY,19,19);
	//draw snake
	ctx[style]="#444";
	for(i in positions){
		temp2PosX=positions[i].x;
		temp2PosY=positions[i].y;
		ctx[draw](20*temp2PosX,20*temp2PosY,19,19);
		if(i>0&&tempPosX==temp2PosX&&tempPosY==temp2PosY){reset();}
	}
	canChangeDir=1;
},99);
</script>